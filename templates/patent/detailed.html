{% extends "base.html" %}

{% block title %}è¯¦ç»†ä¸“åˆ©åˆ†ææŠ¥å‘Š{% endblock %}

{% block header_title %}è¯¦ç»†ä¸“åˆ©åˆ†ææŠ¥å‘Š{% endblock %}

{% block extra_css %}
.detailed-section {
    background: #f9f9f9;
    padding: 25px;
    margin: 25px 0;
    border-radius: 8px;
    border: 1px solid #e0e0e0;
}
.data-highlight {
    background: #e3f2fd;
    padding: 15px;
    border-left: 4px solid #2196f3;
    margin: 15px 0;
    border-radius: 4px;
}
.metric-box {
    display: inline-block;
    background: #fff;
    padding: 15px;
    margin: 10px;
    border-radius: 6px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    text-align: center;
    min-width: 120px;
}
.metric-value {
    font-size: 1.5em;
    font-weight: bold;
    color: #007acc;
}
.metric-label {
    font-size: 0.9em;
    color: #666;
    margin-top: 5px;
}
.analysis-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin: 20px 0;
}
.analysis-card {
    background: #fff;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.trend-indicator {
    display: inline-block;
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 0.8em;
    font-weight: bold;
}
.trend-up { background: #e8f5e8; color: #2e7d32; }
.trend-down { background: #ffebee; color: #c62828; }
.trend-stable { background: #f3e5f5; color: #7b1fa2; }
{% endblock %}

{% block content %}
<!-- æ‰§è¡Œæ‘˜è¦ -->
{% if content.summary %}
<div class="detailed-section">
    <h2>ğŸ“‹ æ‰§è¡Œæ‘˜è¦</h2>
    <div class="data-highlight">
        <p>{{ content.summary }}</p>
    </div>
    
    <!-- å…³é”®æŒ‡æ ‡ -->
    <div style="text-align: center; margin-top: 20px;">
        {% if content.metadata %}
        <div class="metric-box">
            <div class="metric-value">{{ content.metadata.get('total_patents', 'N/A') }}</div>
            <div class="metric-label">æ€»ä¸“åˆ©æ•°</div>
        </div>
        <div class="metric-box">
            <div class="metric-value">{{ content.sections|length }}</div>
            <div class="metric-label">åˆ†æç»´åº¦</div>
        </div>
        <div class="metric-box">
            <div class="metric-value">{{ charts|length }}</div>
            <div class="metric-label">å›¾è¡¨æ•°é‡</div>
        </div>
        {% endif %}
    </div>
</div>
{% endif %}

<!-- è¶‹åŠ¿åˆ†æ -->
{% if content.sections.trend %}
<div class="detailed-section">
    <h2>ğŸ“ˆ è¶‹åŠ¿åˆ†æ</h2>
    
    <div class="analysis-grid">
        <div class="analysis-card">
            <h3>ç”³è¯·è¶‹åŠ¿</h3>
            {% if charts.trend_chart %}
            <div class="chart-container">
                <img src="{{ charts.trend_chart.path }}" alt="ä¸“åˆ©ç”³è¯·è¶‹åŠ¿å›¾" />
                <p><em>å›¾1: ä¸“åˆ©ç”³è¯·è¶‹åŠ¿å˜åŒ–</em></p>
            </div>
            {% endif %}
        </div>
        
        <div class="analysis-card">
            <h3>è¶‹åŠ¿ç‰¹å¾</h3>
            <div class="data-highlight">
                <p><strong>å‘å±•æ–¹å‘:</strong> <span class="trend-indicator trend-up">ä¸Šå‡è¶‹åŠ¿</span></p>
                <p><strong>å¢é•¿ç‰¹ç‚¹:</strong> æŠ€æœ¯åˆ›æ–°æ´»è·ƒæœŸ</p>
                <p><strong>å¸‚åœºçƒ­åº¦:</strong> æŒç»­å…³æ³¨</p>
            </div>
        </div>
    </div>
    
    <div class="data-highlight">
        <h4>è¯¦ç»†åˆ†æ</h4>
        <div>{{ content.sections.trend }}</div>
    </div>
</div>
{% endif %}

<!-- ç«äº‰åˆ†æ -->
{% if content.sections.competition %}
<div class="detailed-section">
    <h2>ğŸ¢ ç«äº‰åˆ†æ</h2>
    
    <div class="analysis-grid">
        <div class="analysis-card">
            <h3>å¸‚åœºæ ¼å±€</h3>
            {% if charts.competition_chart %}
            <div class="chart-container">
                <img src="{{ charts.competition_chart.path }}" alt="ç«äº‰æ ¼å±€å›¾" />
                <p><em>å›¾2: ä¸»è¦ç”³è¯·äººåˆ†å¸ƒ</em></p>
            </div>
            {% endif %}
        </div>
        
        <div class="analysis-card">
            <h3>ç«äº‰æ€åŠ¿</h3>
            <div class="data-highlight">
                <p><strong>å¸‚åœºé›†ä¸­åº¦:</strong> ä¸­ç­‰</p>
                <p><strong>ç«äº‰æ¿€çƒˆç¨‹åº¦:</strong> è¾ƒé«˜</p>
                <p><strong>æ–°è¿›å…¥è€…å£å’:</strong> ä¸­ç­‰</p>
            </div>
        </div>
    </div>
    
    <div class="data-highlight">
        <h4>ç«äº‰æ ¼å±€åˆ†æ</h4>
        <div>{{ content.sections.competition }}</div>
    </div>
</div>
{% endif %}

<!-- æŠ€æœ¯åˆ†æ -->
{% if content.sections.technology %}
<div class="detailed-section">
    <h2>ğŸ”¬ æŠ€æœ¯åˆ†æ</h2>
    
    <div class="analysis-grid">
        <div class="analysis-card">
            <h3>æŠ€æœ¯åˆ†å¸ƒ</h3>
            {% if charts.technology_chart %}
            <div class="chart-container">
                <img src="{{ charts.technology_chart.path }}" alt="æŠ€æœ¯åˆ†ç±»å›¾" />
                <p><em>å›¾3: æŠ€æœ¯é¢†åŸŸåˆ†å¸ƒ</em></p>
            </div>
            {% endif %}
        </div>
        
        <div class="analysis-card">
            <h3>æŠ€æœ¯ç‰¹å¾</h3>
            <div class="data-highlight">
                <p><strong>æŠ€æœ¯æˆç†Ÿåº¦:</strong> å‘å±•æœŸ</p>
                <p><strong>åˆ›æ–°æ´»è·ƒåº¦:</strong> é«˜</p>
                <p><strong>æŠ€æœ¯å¤æ‚åº¦:</strong> ä¸­é«˜</p>
            </div>
        </div>
    </div>
    
    <div class="data-highlight">
        <h4>æŠ€æœ¯å‘å±•åˆ†æ</h4>
        <div>{{ content.sections.technology }}</div>
    </div>
</div>
{% endif %}

<!-- åœ°åŸŸåˆ†æ -->
{% if content.sections.geographic %}
<div class="detailed-section">
    <h2>ğŸŒ åœ°åŸŸåˆ†æ</h2>
    
    <div class="analysis-grid">
        <div class="analysis-card">
            <h3>åœ°åŸŸåˆ†å¸ƒ</h3>
            {% if charts.geographic_chart %}
            <div class="chart-container">
                <img src="{{ charts.geographic_chart.path }}" alt="åœ°åŸŸåˆ†å¸ƒå›¾" />
                <p><em>å›¾4: åœ°åŸŸåˆ†å¸ƒæƒ…å†µ</em></p>
            </div>
            {% endif %}
        </div>
        
        <div class="analysis-card">
            <h3>åŒºåŸŸç‰¹å¾</h3>
            <div class="data-highlight">
                <p><strong>ä¸»è¦åˆ›æ–°åŒºåŸŸ:</strong> äºšæ´²</p>
                <p><strong>æŠ€æœ¯è½¬ç§»æ´»è·ƒåº¦:</strong> ä¸­ç­‰</p>
                <p><strong>å›½é™…åŒ–ç¨‹åº¦:</strong> è¾ƒé«˜</p>
            </div>
        </div>
    </div>
    
    <div class="data-highlight">
        <h4>åœ°åŸŸå‘å±•åˆ†æ</h4>
        <div>{{ content.sections.geographic }}</div>
    </div>
</div>
{% endif %}

<!-- å…³é”®æ´å¯Ÿ -->
{% if content.insights %}
<div class="detailed-section">
    <h2>ğŸ’¡ å…³é”®æ´å¯Ÿ</h2>
    <div class="data-highlight">
        <div>{{ content.insights }}</div>
    </div>
</div>
{% endif %}

<!-- å»ºè®®å’Œç»“è®º -->
{% if content.recommendations %}
<div class="detailed-section">
    <h2>ğŸ“‹ å»ºè®®å’Œç»“è®º</h2>
    <div class="analysis-grid">
        <div class="analysis-card">
            <h3>æˆ˜ç•¥å»ºè®®</h3>
            <div>{{ content.recommendations }}</div>
        </div>
        
        <div class="analysis-card">
            <h3>é£é™©æç¤º</h3>
            <div class="data-highlight">
                <p>â€¢ æŠ€æœ¯å‘å±•ä¸ç¡®å®šæ€§</p>
                <p>â€¢ å¸‚åœºç«äº‰åŠ å‰§é£é™©</p>
                <p>â€¢ çŸ¥è¯†äº§æƒçº çº·é£é™©</p>
            </div>
        </div>
    </div>
</div>
{% endif %}

<!-- æ•°æ®è¯´æ˜ -->
<div class="detailed-section">
    <h2>ğŸ“Š æ•°æ®è¯´æ˜</h2>
    <div class="data-highlight">
        <p><strong>æ•°æ®æ¥æº:</strong> å…¬å¼€ä¸“åˆ©æ•°æ®åº“</p>
        <p><strong>åˆ†ææ–¹æ³•:</strong> å¤šç»´åº¦ç»Ÿè®¡åˆ†æ</p>
        <p><strong>æ•°æ®æ—¶æ•ˆ:</strong> {{ generation_time }}</p>
        <p><strong>å…è´£å£°æ˜:</strong> æœ¬æŠ¥å‘ŠåŸºäºå…¬å¼€æ•°æ®åˆ†æï¼Œä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚</p>
    </div>
</div>
{% endblock %}