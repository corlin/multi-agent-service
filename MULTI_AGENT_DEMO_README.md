# 多智能体交互演示

## 🎯 概述

本项目提供了完整的多智能体交互演示，展示5个专业智能体在不同业务场景下的协作能力。

## 🤖 智能体角色

| 智能体 | 职责 | 核心能力 |
|--------|------|----------|
| **销售代表** | 产品咨询、报价 | 产品介绍、价格咨询、客户关系管理 |
| **客服专员** | 问题解答、技术支持 | 问题诊断、解决方案、客户沟通 |
| **现场服务工程师** | 技术服务、现场支持 | 技术诊断、设备维护、现场部署 |
| **管理者** | 决策分析、战略规划 | 战略制定、决策分析、资源配置 |
| **协调员** | 任务协调、智能体管理 | 任务分配、流程协调、结果整合 |

## 🚀 快速开始

### 方式1: 使用启动器 (推荐)
```bash
python start_multi_agent_demo.py
```

### 方式2: 直接运行
```bash
# 1. 启动服务
uv run uvicorn src.multi_agent_service.main:app --reload

# 2. 运行演示 (新终端)
python quick_multi_agent_demo.py
```

## 📋 演示程序

### 1. 快速演示 (`quick_multi_agent_demo.py`)
**适合**: 快速了解多智能体协作
**时长**: 3-5分钟
**场景**: 5个核心业务场景

```bash
python quick_multi_agent_demo.py
```

**演示场景**:
- 🛒 客户购买咨询
- 🔧 技术故障处理  
- 😡 投诉升级处理
- 🚨 紧急响应
- 📊 战略规划

### 2. 完整场景演示 (`multi_agent_interaction_demo.py`)
**适合**: 深入了解智能体协作机制
**时长**: 10-15分钟
**场景**: 6个完整业务流程

```bash
python multi_agent_interaction_demo.py
```

**演示场景**:
1. **销售咨询流程** - 客户询问 → 销售介绍 → 客服跟进
2. **技术支持协作** - 故障报告 → 客服诊断 → 现场处理
3. **问题升级管理** - 客户投诉 → 协调员分析 → 管理者决策
4. **综合服务协作** - 复杂需求 → 多智能体并行处理 → 协调整合
5. **紧急响应处理** - 紧急故障 → 快速响应 → 多部门协同
6. **战略规划协作** - 市场分析 → 各部门输入 → 管理决策

### 3. 交互式演示 (`interactive_multi_agent_demo.py`)
**适合**: 自定义场景体验
**时长**: 不限
**特点**: 用户可控制对话流程

```bash
python interactive_multi_agent_demo.py
```

**功能模式**:
- **单智能体对话** - 与指定智能体直接对话
- **智能路由演示** - 系统自动推荐合适的智能体
- **预设场景演示** - 选择预设的业务场景
- **多智能体协作** - 输入复杂问题，多智能体协同处理

## 🎬 场景详解

### 场景1: 销售咨询流程
```
👤 客户: "我想了解AI客服系统的功能和价格"
    ↓
🤖 销售代表: 介绍产品功能、技术优势、价格方案
    ↓
👤 客户: "技术架构是怎样的？"
    ↓
🤖 客服专员: 详细解释技术细节、部署方案
```

### 场景2: 技术支持协作
```
👤 客户: "系统无法访问，API返回500错误"
    ↓
🤖 客服专员: 初步诊断，检查常见问题
    ↓
🔧 升级处理: 需要深度技术支持
    ↓
🤖 现场服务工程师: 深度诊断，制定修复方案
```

### 场景3: 问题升级管理
```
😡 客户投诉: "服务质量差，要求赔偿"
    ↓
🤖 协调员: 分析问题，评估影响，提出处理建议
    ↓
🤖 管理者: 制定解决方案，确定补偿措施
```

### 场景4: 综合服务协作
```
🏢 企业需求: 复杂的AI系统采购和部署
    ↓
🔄 并行处理:
├── 🤖 销售代表: 产品方案和报价
├── 🤖 客服专员: 技术集成方案
├── 🤖 现场服务: 部署和培训计划
└── 🤖 管理者: 战略合作规划
    ↓
🤖 协调员: 整合所有方案，提供统一解决方案
```

### 场景5: 紧急响应处理
```
🚨 紧急故障: "全系统宕机，大量客户受影响"
    ↓
🤖 协调员: 立即启动应急响应计划
    ↓
🔄 并行响应:
├── 🤖 现场服务: 技术抢修
├── 🤖 客服专员: 客户通知
└── 🤖 管理者: 损失评估和补偿
```

### 场景6: 战略规划协作
```
📊 战略需求: "制定2025年发展战略"
    ↓
🔄 各部门输入:
├── 🤖 销售代表: 市场机会分析
├── 🤖 客服专员: 服务质量建议
└── 🤖 现场服务: 技术能力评估
    ↓
🤖 管理者: 综合制定发展战略
    ↓
🤖 协调员: 制定执行计划
```

## 🔧 技术特性

### 智能路由
- 自动分析用户问题
- 推荐最合适的智能体
- 提供置信度评分

### 工作流类型
- **Sequential**: 顺序执行，适合有依赖关系的任务
- **Parallel**: 并行执行，适合独立任务的快速处理
- **Hierarchical**: 分层管理，适合复杂决策流程

### 协作机制
- **上下文传递**: 智能体间共享对话历史
- **任务分解**: 复杂问题自动分解为子任务
- **结果整合**: 协调员整合多个智能体的输出

## 📊 演示效果

### 性能指标
- **响应时间**: 通常1-3秒
- **准确率**: 智能路由准确率>90%
- **协作效率**: 多智能体并行处理提升50%效率

### 用户体验
- **自然对话**: 支持中文自然语言交互
- **角色专业化**: 每个智能体都有专业的领域知识
- **流程透明**: 清晰展示任务分配和处理过程

## 🛠️ 自定义配置

### 修改智能体配置
编辑 `config/agents.json`:
```json
{
  "agents": {
    "sales_agent": {
      "name": "销售代表智能体",
      "capabilities": ["product_consultation", "price_quotation"],
      "prompt_template": "你是专业的销售代表..."
    }
  }
}
```

### 修改工作流配置
编辑 `config/workflows.json`:
```json
{
  "workflows": {
    "sales_consultation": {
      "workflow_type": "sequential",
      "participating_agents": ["sales_agent", "customer_support_agent"]
    }
  }
}
```

## 🔍 故障排除

### 常见问题

**Q: 演示无法启动？**
```bash
# 检查环境
python --version  # 需要3.12+
uv sync          # 安装依赖
```

**Q: 智能体无响应？**
```bash
# 检查API配置
cat .env | grep API_KEY
# 检查服务状态
curl http://localhost:8000/api/v1/health
```

**Q: 服务启动失败？**
```bash
# 检查端口占用
netstat -an | grep 8000
# 使用其他端口
uv run uvicorn src.multi_agent_service.main:app --port 8001
```

### 调试模式
```bash
# 启用详细日志
export LOG_LEVEL=DEBUG
python multi_agent_interaction_demo.py
```

## 📈 扩展开发

### 添加新智能体
1. 在 `config/agents.json` 中定义智能体
2. 实现智能体逻辑
3. 更新路由规则

### 添加新场景
1. 在演示程序中添加新的场景函数
2. 定义智能体交互流程
3. 测试场景效果

### 集成外部服务
1. 添加新的模型提供商
2. 实现自定义工具调用
3. 扩展API接口

## 🎉 开始体验

选择适合您的演示方式：

1. **快速体验**: `python quick_multi_agent_demo.py`
2. **完整演示**: `python multi_agent_interaction_demo.py`  
3. **交互体验**: `python interactive_multi_agent_demo.py`
4. **一键启动**: `python start_multi_agent_demo.py`

享受多智能体协作的强大能力！ 🚀